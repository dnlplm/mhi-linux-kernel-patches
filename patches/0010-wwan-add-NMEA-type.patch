From e51b9ab2d46cb313403a0054cfba6df9d6af621d Mon Sep 17 00:00:00 2001
From: Daniele Palmas <dnlplm@gmail.com>
Date: Tue, 22 Mar 2022 13:21:54 +0100
Subject: [PATCH 10/10] wwan: add NMEA type

Signed-off-by: Daniele Palmas <dnlplm@gmail.com>
---
 drivers/net/wwan/mhi_wwan_ctrl.c |  1 +
 drivers/net/wwan/wwan_core.c     | 10 +++++++---
 include/linux/wwan.h             |  1 +
 3 files changed, 9 insertions(+), 3 deletions(-)

diff --git a/drivers/net/wwan/mhi_wwan_ctrl.c b/drivers/net/wwan/mhi_wwan_ctrl.c
index 1c7f6d6f77e7..6c8ff4fcaa7f 100644
--- a/drivers/net/wwan/mhi_wwan_ctrl.c
+++ b/drivers/net/wwan/mhi_wwan_ctrl.c
@@ -270,6 +270,7 @@ static const struct mhi_device_id mhi_wwan_ctrl_match_table[] = {
 	{ .chan = "DIAG", .driver_data = WWAN_PORT_QCDM },
 	{ .chan = "FIREHOSE", .driver_data = WWAN_PORT_FIREHOSE },
 	{ .chan = "SAHARA", .driver_data = WWAN_PORT_SAHARA },
+	{ .chan = "NMEA", .driver_data = WWAN_PORT_NMEA },
 	{},
 };
 MODULE_DEVICE_TABLE(mhi, mhi_wwan_ctrl_match_table);
diff --git a/drivers/net/wwan/wwan_core.c b/drivers/net/wwan/wwan_core.c
index f3ee55570a0f..e7222cc4d451 100644
--- a/drivers/net/wwan/wwan_core.c
+++ b/drivers/net/wwan/wwan_core.c
@@ -253,9 +253,13 @@ static const struct {
 		.devsuf = "firehose",
 	},
 	[WWAN_PORT_SAHARA] = {
-                .name = "SAHARA",
-                .devsuf = "sahara",
-        },
+		.name = "SAHARA",
+		.devsuf = "sahara",
+	},
+	[WWAN_PORT_NMEA] = {
+		.name = "NMEA",
+		.devsuf = "nmea",
+	},
 };
 
 static ssize_t type_show(struct device *dev, struct device_attribute *attr,
diff --git a/include/linux/wwan.h b/include/linux/wwan.h
index 26a137d561f3..5cdb1bf4616d 100644
--- a/include/linux/wwan.h
+++ b/include/linux/wwan.h
@@ -30,6 +30,7 @@ enum wwan_port_type {
 	WWAN_PORT_QCDM,
 	WWAN_PORT_FIREHOSE,
 	WWAN_PORT_SAHARA,
+	WWAN_PORT_NMEA,
 
 	/* Add new port types above this line */
 
-- 
2.32.0

